<%= tag.div(data: {
  controller: "map",
  "map-mapurl-value": map_url,
  "map-latitude-value": @latitude,
  "map-longitude-value": @longitude,
  "map-from-value": @from ? @from.id : "",
  "map-to-value": @to ? @to.id : "",
  "map-location-unavailable-value": t(:location_unavailable),
  "map-set-journey-from-value": t(:set_journey_from),
  "map-set-journey-to-value": t(:set_journey_to),
}) do %>
  <%= turbo_frame_tag "controls" do %>
    <%= render partial: "controls", locals: { from: @from, to: @to } %>
  <% end %>

  <!-- https://discuss.hotwired.dev/t/leafletjs-with-stimulusjs-on-rails-6/1343/2 -->
  <%= tag.div(id: "mapid",
              class: "z-10 mb-4 h-64 bg-gray-200",
              style: "height: 600px",
              data: { "map-target": "placeholder" }
             ) %>
<% end %>
